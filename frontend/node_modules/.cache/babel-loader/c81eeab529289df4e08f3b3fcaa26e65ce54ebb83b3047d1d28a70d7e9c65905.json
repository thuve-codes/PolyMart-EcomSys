{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\PolyMart-EcoPlastMangementSys\\\\frontend-ecomm\\\\src\\\\pages\\\\Cart.js\",\n  _s = $RefreshSig$();\nimport { Fragment, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { FaPlus, FaMinus, FaTrash, FaArrowLeft, FaCreditCard, FaMapMarkerAlt, FaUser } from \"react-icons/fa\";\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Cart({\n  cartItems,\n  setCartItems\n}) {\n  _s();\n  const stripe = useStripe();\n  const elements = useElements();\n  const [activeStep, setActiveStep] = useState(\"cart\"); // 'cart', 'checkout', 'complete'\n  const API_URL = \"http://localhost:5001\";\n  const [formData, setFormData] = useState({\n    fullName: \"\",\n    email: \"\",\n    phone: \"\",\n    address: \"\",\n    city: \"\",\n    zipCode: \"\",\n    country: \"LK\"\n  });\n  const totalItems = cartItems.reduce((acc, item) => acc + item.qty, 0);\n  const subtotal = cartItems.reduce((acc, item) => acc + item.product.price * item.qty, 0);\n  const shipping = subtotal > 2500 ? 0 : 250;\n  const tax = subtotal * 0.05;\n  const total = subtotal + shipping + tax;\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  // Functions for cart manipulation\n  const decreaseQty = item => {\n    const updatedCart = cartItems.map(cartItem => cartItem.product._id === item.product._id && cartItem.qty > 1 ? {\n      ...cartItem,\n      qty: cartItem.qty - 1\n    } : cartItem);\n    setCartItems(updatedCart);\n  };\n  const increaseQty = item => {\n    const updatedCart = cartItems.map(cartItem => cartItem.product._id === item.product._id && cartItem.qty < item.product.stock ? {\n      ...cartItem,\n      qty: cartItem.qty + 1\n    } : cartItem);\n    setCartItems(updatedCart);\n  };\n  const removeItem = item => {\n    const updatedCart = cartItems.filter(cartItem => cartItem.product._id !== item.product._id);\n    setCartItems(updatedCart);\n  };\n\n  // Stripe payment integration\n  async function placeOrderHandler(e) {\n    e.preventDefault();\n    if (!stripe || !elements) {\n      toast.error(\"Stripe not loaded yet\");\n      return;\n    }\n    try {\n      // Fetch payment intent client secret from backend first\n      const paymentIntentRes = await fetch(`${API_URL}/api/v1/payment`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          amount: total * 100 // Stripe expects amount in cents\n        })\n      });\n      const {\n        clientSecret\n      } = await paymentIntentRes.json();\n      const result = await stripe.confirmCardPayment(clientSecret, {\n        payment_method: {\n          card: elements.getElement(CardElement),\n          billing_details: {\n            name: formData.fullName,\n            email: formData.email,\n            phone: formData.phone,\n            address: {\n              line1: formData.address,\n              city: formData.city,\n              postal_code: formData.zipCode,\n              country: formData.country\n            }\n          }\n        }\n      });\n      if (result.error) {\n        toast.error(result.error.message);\n        return;\n      }\n      if (result.paymentIntent.status === \"succeeded\") {\n        // Now create the order in backend\n        const orderResponse = await fetch(`${API_URL}/api/v1/order`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            cartItems,\n            formData,\n            subtotal,\n            shipping,\n            tax,\n            total,\n            paymentIntentId: result.paymentIntent.id\n          })\n        });\n        const orderData = await orderResponse.json();\n        if (!orderResponse.ok) {\n          throw new Error(orderData.error || \"Failed to place order\");\n        }\n        setCartItems([]);\n        setActiveStep(\"complete\");\n        toast.success(\"Order placed successfully!\");\n      }\n    } catch (error) {\n      console.error(error);\n      toast.error(error.message || \"Order placement failed\");\n    }\n  }\n  if (activeStep === \"complete\") {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"order-complete\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"complete-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkmark\",\n          children: \"\\u2713\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Order Confirmed!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Thank you for your purchase. Your order has been received.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"btn continue-shopping\",\n          children: \"Continue Shopping\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this);\n  }\n  return cartItems.length > 0 ? /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-container\",\n      children: [activeStep === \"checkout\" && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-to-cart\",\n        onClick: () => setActiveStep(\"cart\"),\n        children: [/*#__PURE__*/_jsxDEV(FaArrowLeft, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this), \" Back to Cart\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-content\",\n        children: activeStep === \"cart\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-items-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"cart-title\",\n              children: [\"Your Shopping Cart \", /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"(\", totalItems, \" items)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 38\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                children: \"Buy morethan 2500 and get free shipping\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 24\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart-items\",\n              children: cartItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cart-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"item-image-container\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: item.product.images[0].image,\n                    alt: item.product.name,\n                    className: \"cart-item-image\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cart-item-details\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item-info\",\n                    children: [/*#__PURE__*/_jsxDEV(Link, {\n                      to: `/product/${item.product._id}`,\n                      className: \"cart-item-name\",\n                      children: item.product.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 176,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"cart-item-price\",\n                      children: [\"Rs \", item.product.price.toLocaleString()]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 179,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item-controls\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"quantity-control\",\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"qty-btn\",\n                        onClick: () => decreaseQty(item),\n                        disabled: item.qty <= 1,\n                        \"data-tooltip\": \"Decrease quantity\",\n                        children: /*#__PURE__*/_jsxDEV(FaMinus, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 189,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 183,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"quantity\",\n                        children: item.qty\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 191,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"qty-btn\",\n                        onClick: () => increaseQty(item),\n                        disabled: item.qty >= item.product.stock,\n                        \"data-tooltip\": \"Increase quantity\",\n                        children: /*#__PURE__*/_jsxDEV(FaPlus, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 198,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 192,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 182,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"remove-btn\",\n                      onClick: () => removeItem(item),\n                      \"data-tooltip\": \"Remove item\",\n                      children: [/*#__PURE__*/_jsxDEV(FaTrash, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 206,\n                        columnNumber: 29\n                      }, this), \" Remove\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 201,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 23\n                }, this)]\n              }, item.product._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"order-summary-section\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"order-summary\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Order Summary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Subtotal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Rs \", subtotal.toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Shipping\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: shipping === 0 ? \"FREE\" : `Rs ${shipping}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Tax (5%)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Rs \", tax.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-row total\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Total\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Rs \", total.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"checkout-btn\",\n                onClick: () => setActiveStep(\"checkout\"),\n                children: \"Proceed to Checkout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkout-section\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"checkout-form-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Checkout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: placeOrderHandler,\n              className: \"checkout-form\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: [/*#__PURE__*/_jsxDEV(FaUser, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 25\n                  }, this), \" Personal Information\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"fullName\",\n                    value: formData.fullName,\n                    onChange: handleChange,\n                    placeholder: \"Full Name\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"email\",\n                    name: \"email\",\n                    value: formData.email,\n                    onChange: handleChange,\n                    placeholder: \"Email Address\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    name: \"phone\",\n                    value: formData.phone,\n                    onChange: handleChange,\n                    placeholder: \"Phone Number\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: [/*#__PURE__*/_jsxDEV(FaMapMarkerAlt, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 277,\n                    columnNumber: 25\n                  }, this), \" Shipping Address\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"address\",\n                    value: formData.address,\n                    onChange: handleChange,\n                    placeholder: \"Street Address\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"city\",\n                    value: formData.city,\n                    onChange: handleChange,\n                    placeholder: \"City\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 287,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"zipCode\",\n                    value: formData.zipCode,\n                    onChange: handleChange,\n                    placeholder: \"Zip Code\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 295,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"country\",\n                    value: formData.country,\n                    onChange: handleChange,\n                    placeholder: \"Country\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 303,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: [/*#__PURE__*/_jsxDEV(FaCreditCard, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 315,\n                    columnNumber: 25\n                  }, this), \" Payment Details\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(CardElement, {\n                  options: {\n                    style: {\n                      base: {\n                        fontSize: '16px',\n                        color: '#424770',\n                        '::placeholder': {\n                          color: '#aab7c4'\n                        }\n                      },\n                      invalid: {\n                        color: '#9e2146'\n                      }\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 316,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"order-summary-checkout\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \"Order Summary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"summary-row total\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 334,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"Rs \", total.toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  className: \"place-order-btn\",\n                  children: \"Place Order\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"empty-cart\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Your cart is empty!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      className: \"btn continue-shopping\",\n      children: \"Continue Shopping\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 349,\n    columnNumber: 5\n  }, this);\n}\n\n// import { Fragment, useState } from \"react\";\n// import { Link } from \"react-router-dom\";\n// import { toast } from \"react-toastify\";\n// import { FaPlus, FaMinus, FaTrash, FaArrowLeft, FaCreditCard, FaMapMarkerAlt, FaUser } from \"react-icons/fa\";\n// import { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\n\n// const stripe = useStripe();\n// const elements = useElements();\n\n// export default function Cart({ cartItems, setCartItems }) {\n//   const [activeStep, setActiveStep] = useState(\"cart\"); // 'cart', 'checkout', 'complete'\n//   const API_URL = \"http://localhost:5001\";\n\n//   // Example for your Product component\n//   async function placeOrderHandler(e) {\n//     e.preventDefault();\n\n//     // Validate all required fields\n//     const requiredFields = ['fullName', 'email', 'phone', 'address', 'city', 'zipCode', 'country'];\n//     const missingFields = requiredFields.filter(field => !formData[field].trim());\n\n//     if (missingFields.length > 0) {\n//       toast.error(`Missing required fields: ${missingFields.join(', ')}`);\n//       return;\n//     }\n\n//     // Validate payment details\n//     const cardNum = formData.cardNumber.replace(/\\s/g, '');\n//     if (!/^\\d{16}$/.test(cardNum)) {\n//       toast.error('Invalid card number (must be 16 digits)');\n//       return;\n//     }\n\n//     try {\n//       const orderData = {\n//         cartItems: cartItems.map(item => ({\n//           product: {\n//             _id: item.product._id,\n//             name: item.product.name,\n//             price: item.product.price\n//           },\n//           qty: item.qty\n//         })),\n//         formData: {\n//           ...formData,\n//           // Ensure phone is string (some validations expect string)\n//           phone: String(formData.phone)\n//         },\n//         subtotal,\n//         shipping,\n//         tax,\n//         total\n//       };\n\n//       const response = await fetch(`${API_URL}/api/v1/order`, {\n//         method: 'POST',\n//         headers: { 'Content-Type': 'application/json' },\n//         body: JSON.stringify(orderData)\n//       });\n\n//       const data = await response.json();\n\n//       if (!response.ok) {\n//         // Handle specific backend validation errors\n//         if (data.error && data.error.includes('validation failed')) {\n//           const validationErrors = Object.entries(data.errors || {})\n//             .map(([field, error]) => `${field}: ${error.message}`);\n//           toast.error(`Validation errors:\\n${validationErrors.join('\\n')}`);\n//         } else {\n//           throw new Error(data.message || 'Failed to place order');\n//         }\n//         return;\n//       }\n\n//       // Success case\n//       setCartItems([]);\n//       setActiveStep('complete');\n//       toast.success('Order confirmed!');\n\n//     } catch (error) {\n//       console.error('Order error:', error);\n//       toast.error(error.message || 'Failed to place order. Please try again.');\n//     }\n//   }\n\n//   const [formData, setFormData] = useState({\n//     fullName: \"\",\n//     email: \"\",\n//     phone: \"\",\n//     address: \"\",\n//     city: \"\",\n//     zipCode: \"\",\n//     country: \"\",\n//     cardNumber: \"\",\n//     expiryDate: \"\",\n//     cvv: \"\",\n//   });\n\n//   function increaseQty(item) {\n//     if (item.product.stock <= item.qty) {\n//       toast.warning(`Only ${item.product.stock} available in stock`);\n//       return;\n//     }\n//     const updatedItems = cartItems.map((i) =>\n//       i.product._id === item.product._id ? { ...i, qty: i.qty + 1 } : i\n//     );\n//     setCartItems(updatedItems);\n//   }\n\n//   function decreaseQty(item) {\n//     if (item.qty > 1) {\n//       const updatedItems = cartItems.map((i) =>\n//         i.product._id === item.product._id ? { ...i, qty: i.qty - 1 } : i\n//       );\n//       setCartItems(updatedItems);\n//     }\n//   }\n\n//   function removeItem(item) {\n//     const updatedItems = cartItems.filter((i) => i.product._id !== item.product._id);\n//     setCartItems(updatedItems);\n//     toast.success(`${item.product.name} removed from cart`);\n//   }\n\n//   async function placeOrderHandler(e) {\n//     e.preventDefault();\n\n//     // Validate all form fields\n//     const emptyFields = Object.entries(formData).some(([key, value]) => {\n//       // Skip CVV validation here if you have separate validation\n//       if (key === 'cvv') return false;\n//       return value.trim() === \"\";\n//     });\n\n//     if (emptyFields) {\n//       toast.error(\"All fields are required!\");\n//       return;\n//     }\n\n//     // Validate card details\n//     if (!/^\\d{16}$/.test(formData.cardNumber.replace(/\\s/g, ''))) {\n//       toast.error(\"Please enter a valid 16-digit card number\");\n//       return;\n//     }\n\n//     if (!/^\\d{3,4}$/.test(formData.cvv)) {\n//       toast.error(\"Please enter a valid CVV (3 or 4 digits)\");\n//       return;\n//     }\n\n//     try {\n//       const response = await fetch(`${API_URL}/api/v1/order`, {\n//         method: \"POST\",\n//         headers: { \"Content-Type\": \"application/json\" },\n//         body: JSON.stringify({\n//           cartItems,\n//           formData,\n//           subtotal,\n//           shipping,\n//           tax,\n//           total\n//         }),\n//       });\n\n//       const data = await response.json();\n\n//       if (!response.ok) {\n//         throw new Error(data.error || 'Failed to plac0e order2121131161');\n//       }\n\n//       if (data.success) {\n//         setCartItems([]);\n//         setActiveStep(\"complete\");\n//         toast.success(\"Order Confirmed!\");\n//       } else {\n//         if (data.stockIssues) {\n//           // Handle stock issues\n//           data.stockIssues.forEach(issue => {\n//             toast.error(`${issue.name}: ${issue.error}${issue.available ? ` (Available: ${issue.available})` : ''}`);\n//           });\n\n//           // Remove problematic items from cart\n//           const updatedCart = cartItems.filter(item => \n//             !data.stockIssues.some(issue => issue.productId === item.product._id)\n//           );\n//           setCartItems(updatedCart);\n//         } else {\n//           toast.error(data.error || \"Failed to placepjkk order\");\n//         }\n//       }\n//     } catch (error) {\n//       console.error(\"Order error:\", error);\n//       toast.error(error.message || \"Failed to place order. Please try again.\");\n//     }\n//   }\n//   const handleChange = (e) => {\n//     setFormData({ ...formData, [e.target.name]: e.target.value });\n//   };\n\n//   const totalItems = cartItems.reduce((acc, item) => acc + item.qty, 0);\n//   const subtotal = cartItems.reduce((acc, item) => acc + item.product.price * item.qty, 0);\n//   const shipping = subtotal > 5000 ? 0 : 250;\n//   const tax = subtotal * 0.05;\n//   const total = subtotal + shipping + tax;\n\n//   if (activeStep === \"complete\") {\n//     return (\n//       <div className=\"order-complete\">\n//         <div className=\"complete-card\">\n//           <div className=\"checkmark\">✓</div>\n//           <h2>Order Confirmed!</h2>\n//           <p>Thank you for your purchase. Your order has been received.</p>\n//           <Link to=\"/\" className=\"btn continue-shopping\">\n//             Continue Shopping\n//           </Link>\n//         </div>\n//       </div>\n//     );\n//   }\n\n//   //Stripe payment integration\n//   async function placeOrderHandler(e) {\n//     e.preventDefault();\n\n//     if (!stripe || !elements) {\n//       toast.error(\"Stripe not loaded yet\");\n//       return;\n//     }\n\n//     try {\n//       // Fetch payment intent client secret from backend first\n//       const paymentIntentRes = await fetch(`${API_URL}/api/v1/create-payment-intent`, {\n//         method: 'POST',\n//         headers: { 'Content-Type': 'application/json' },\n//         body: JSON.stringify({ \n//           amount: total * 100 // Stripe expects amount in cents\n//         }),\n//       });\n\n//       const { clientSecret } = await paymentIntentRes.json();\n\n//       const result = await stripe.confirmCardPayment(clientSecret, {\n//         payment_method: {\n//           card: elements.getElement(CardElement),\n//           billing_details: {\n//             name: formData.fullName,\n//             email: formData.email,\n//             phone: formData.phone,\n//             address: {\n//               line1: formData.address,\n//               city: formData.city,\n//               postal_code: formData.zipCode,\n//               country: formData.country,\n//             },\n//           },\n//         },\n//       });\n\n//       if (result.error) {\n//         toast.error(result.error.message);\n//         return;\n//       }\n\n//       if (result.paymentIntent.status === \"succeeded\") {\n//         // Now create the order in backend\n//         const orderResponse = await fetch(`${API_URL}/api/v1/order`, {\n//           method: \"POST\",\n//           headers: { \"Content-Type\": \"application/json\" },\n//           body: JSON.stringify({\n//             cartItems,\n//             formData,\n//             subtotal,\n//             shipping,\n//             tax,\n//             total,\n//             paymentIntentId: result.paymentIntent.id,\n//           }),\n//         });\n\n//         const orderData = await orderResponse.json();\n\n//         if (!orderResponse.ok) {\n//           throw new Error(orderData.error || \"Failed to place order\");\n//         }\n\n//         setCartItems([]);\n//         setActiveStep(\"complete\");\n//         toast.success(\"Order placed successfully!\");\n//       }\n//     } catch (error) {\n//       console.error(error);\n//       toast.error(error.message || \"Order placement failed\");\n//     }\n//   }\n\n//   return cartItems.length > 0 ? (\n//     <Fragment>\n//       <div className=\"cart-container\">\n//         {activeStep === \"checkout\" && (\n//           <button className=\"back-to-cart\" onClick={() => setActiveStep(\"cart\")}>\n//             <FaArrowLeft /> Back to Cart\n//           </button>\n//         )}\n\n//         <div className=\"cart-content\">\n//           {activeStep === \"cart\" ? (\n//             <>\n//               <div className=\"cart-items-section\">\n//                 <h2 className=\"cart-title\">\n//                   Your Shopping Cart <span>({totalItems} items)</span>\n//                 </h2>\n//                 <div className=\"cart-items\">\n//                   {cartItems.map((item) => (\n//                     <div key={item.product._id} className=\"cart-item\">\n//                       <div className=\"item-image-container\">\n//                         <img\n//                           src={item.product.images[0].image}\n//                           alt={item.product.name}\n//                           className=\"cart-item-image\"\n//                         />\n//                       </div>\n//                       <div className=\"cart-item-details\">\n//                         <div className=\"item-info\">\n//                           <Link to={`/product/${item.product._id}`} className=\"cart-item-name\">\n//                             {item.product.name}\n//                           </Link>\n//                           <p className=\"cart-item-price\">Rs {item.product.price.toLocaleString()}</p>\n//                         </div>\n//                         <div className=\"item-controls\">\n//                         <div className=\"quantity-control\">\n//   <button\n//     className=\"qty-btn\"\n//     onClick={() => decreaseQty(item)}\n//     disabled={item.qty <= 1}\n//     data-tooltip=\"Decrease quantity\"\n//   >\n//     <FaMinus />\n//   </button>\n//   <span className=\"quantity\">{item.qty}</span>\n//   <button\n//     className=\"qty-btn\"\n//     onClick={() => increaseQty(item)}\n//     disabled={item.qty >= item.product.stock}\n//     data-tooltip=\"Increase quantity\"\n//   >\n//     <FaPlus />\n//   </button>\n// </div>\n// <button \n//   className=\"remove-btn\" \n//   onClick={() => removeItem(item)}\n//   data-tooltip=\"Remove item\"\n// >\n//   <FaTrash /> Remove\n// </button>\n//                         </div>\n//                       </div>\n//                     </div>\n//                   ))}\n//                 </div>\n//               </div>\n//               <div className=\"order-summary-section\">\n//   <div className=\"order-summary\">\n//     <h3>Order Summary</h3>\n//     <div className=\"summary-row\">\n//       <span>Subtotal</span>\n//       <span>Rs {subtotal.toLocaleString()}</span>\n//     </div>\n//     <div className=\"summary-row\">\n//       <span>Shipping</span>\n//       <span>{shipping === 0 ? \"FREE\" : `Rs ${shipping}`}</span>\n//     </div>\n//     <div className=\"summary-row\">\n//       <span>Tax (5%)</span>\n//       <span>Rs {tax.toFixed(2)}</span>\n//     </div>\n//     <div className=\"summary-row total\">\n//       <span>Total</span>\n//       <span>Rs {total.toFixed(2)}</span>\n//     </div>\n//     <button\n//       className=\"checkout-btn\"\n//       onClick={() => setActiveStep(\"checkout\")}\n//     >\n//       Proceed to Checkout\n//     </button>\n//   </div>\n// </div>\n//             </>\n//           ) : (\n//             <div className=\"checkout-section\">\n//               <div className=\"checkout-form-container\">\n//                 <h2>Checkout</h2>\n//                 <div className=\"checkout-steps\">\n//                   <div className={`step ${activeStep === \"cart\" ? \"active\" : \"\"}`}>\n//                     <span>1</span> Cart\n//                   </div>\n//                   <div className={`step ${activeStep === \"checkout\" ? \"active\" : \"\"}`}>\n//                     <span>2</span> Checkout\n//                   </div>\n//                   <div className={`step ${activeStep === \"complete\" ? \"active\" : \"\"}`}>\n//                     <span>3</span> Confirmation<br/>\n//                   </div>\n//                 </div>\n\n//                 <form onSubmit={placeOrderHandler} className=\"checkout-form\">\n//                   <div className=\"form-section\">\n//                     <br/>\n//                     <h3><FaUser /> Personal Information</h3>\n//                     <div className=\"form-group\">\n//                       <input\n//                         type=\"text\"\n//                         name=\"fullName\"\n//                         value={formData.fullName}\n//                         onChange={handleChange}\n//                         placeholder=\"Name\"\n//                         required\n//                       />\n\n//                     <input\n//                         type=\"email\"\n//                         name=\"email\"\n//                         value={formData.email}\n//                         onChange={handleChange}\n//                         placeholder=\"Email Address\"\n//                         required\n//                       />\n//                       <input\n//                         type=\"number\"\n//                         name=\"phone\"\n//                         value={formData.phone}\n//                         onChange={handleChange}\n//                         placeholder=\"Phone Number\"\n//                         required\n//                       />\n\n//                     </div>\n//                   </div>\n//                   {/*→ Stripe does NOT allow you to collect raw card details using normal inputs (for security/PCI-DSS rules).\n//                   → You must use Stripe's CardElement or Stripe Elements to securely handle card numbers, expiry, CVV etc.8→*/}\n//                   <div className=\"form-section\">\n//                     <h3><FaMapMarkerAlt /> Shipping Address</h3>\n//                     <div className=\"form-group\">\n//                       <input\n//                         type=\"text\"\n//                         name=\"address\"\n//                         value={formData.address}\n//                         onChange={handleChange}\n//                         placeholder=\"Street Address\"\n//                         required\n//                       />\n//                     </div>\n//                     <div className=\"form-row\">\n//                       <div className=\"form-group\">\n//                         <input\n//                           type=\"text\"\n//                           name=\"city\"\n//                           value={formData.city}\n//                           onChange={handleChange}\n//                           placeholder=\"City\"\n//                           required\n//                         />\n//                       </div>\n//                       <div className=\"form-group\">\n//                         <input\n//                           type=\"text\"\n//                           name=\"zipCode\"\n//                           value={formData.zipCode}\n//                           onChange={handleChange}\n//                           placeholder=\"Zip Code\"\n//                           required\n//                         />\n//                       </div>\n//                     </div>\n//                     <div className=\"form-group\">\n//                       <input\n//                         type=\"text\"\n//                         name=\"country\"\n//                         value={formData.country}\n//                         onChange={handleChange}\n//                         placeholder=\"Country\"\n//                         required\n//                       />\n//                     </div>\n//                   </div><div className=\"form-section\">\n//                   <h3><FaCreditCard /> Payment Details</h3>\n//                   <div className=\"form-group\">\n//                     <CardElement options={{\n//                       style: {\n//                         base: {\n//                           fontSize: '16px',\n//                           color: '#424770',\n//                           '::placeholder': {\n//                             color: '#aab7c4',\n//                           },\n//                         },\n//                         invalid: {\n//                           color: '#9e2146',\n//                         },\n//                       },\n//                     }} />\n//                   </div>\n\n//                 </div>\n\n//                   <div className=\"order-summary-checkout\">\n//                     <h3>Order Summary</h3>\n//                     {cartItems.map((item) => (\n//                       <div key={item.product._id} className=\"checkout-item\">\n//                         <span>\n//                           {item.product.name} × {item.qty}\n//                         </span>\n//                         <span>Rs {(item.product.price * item.qty).toLocaleString()}</span>\n//                       </div>\n//                     ))}\n//                     <div className=\"summary-row\">\n//                       <span>Subtotal</span>\n//                       <span>Rs {subtotal.toLocaleString()}</span>\n//                     </div>\n//                     <div className=\"summary-row\">\n//                       <span>Shipping</span>\n//                       <span>{shipping === 0 ? \"FREE\" : `Rs ${shipping}`}</span>\n//                     </div>\n//                     <div className=\"summary-row\">\n//                       <span>Tax (5%)</span>\n//                       <span>Rs {tax.toFixed(2)}</span>\n//                     </div>\n//                     <div className=\"summary-row total\">\n//                       <span>Total</span>\n//                       <span>Rs {total.toFixed(2)}</span>\n//                     </div>\n//                     <button type=\"submit\" className=\"place-order-btn\">\n//                       Place Order\n//                     </button>\n//                   </div>\n//                 </form>\n//               </div>\n//             </div>\n//           )}\n//         </div>\n//       </div>\n//     </Fragment>\n//   ) : (\n//     <div className=\"empty-cart\">\n//       <div className=\"empty-cart-content\">\n//         <div className=\"empty-cart-icon\">🛒</div>\n//         <h2>Your cart is empty</h2>\n//         <p>Looks like you haven't added anything to your cart yet</p>\n//         <Link to=\"/\" className=\"btn continue-shopping\">\n//           Continue Shopping\n//         </Link>\n//       </div>\n//     </div>\n//   );\n// }\n_s(Cart, \"qTXYoQU98Upg5aT67aRLfnJAgE8=\", false, function () {\n  return [useStripe, useElements];\n});\n_c = Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["Fragment","useState","Link","toast","FaPlus","FaMinus","FaTrash","FaArrowLeft","FaCreditCard","FaMapMarkerAlt","FaUser","CardElement","useStripe","useElements","jsxDEV","_jsxDEV","_Fragment","Cart","cartItems","setCartItems","_s","stripe","elements","activeStep","setActiveStep","API_URL","formData","setFormData","fullName","email","phone","address","city","zipCode","country","totalItems","reduce","acc","item","qty","subtotal","product","price","shipping","tax","total","handleChange","e","target","name","value","decreaseQty","updatedCart","map","cartItem","_id","increaseQty","stock","removeItem","filter","placeOrderHandler","preventDefault","error","paymentIntentRes","fetch","method","headers","body","JSON","stringify","amount","clientSecret","json","result","confirmCardPayment","payment_method","card","getElement","billing_details","line1","postal_code","message","paymentIntent","status","orderResponse","paymentIntentId","id","orderData","ok","Error","success","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","length","onClick","src","images","image","alt","toLocaleString","disabled","toFixed","onSubmit","type","onChange","placeholder","required","options","style","base","fontSize","color","invalid","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/PolyMart-EcoPlastMangementSys/frontend-ecomm/src/pages/Cart.js"],"sourcesContent":["import { Fragment, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { FaPlus, FaMinus, FaTrash, FaArrowLeft, FaCreditCard, FaMapMarkerAlt, FaUser } from \"react-icons/fa\";\r\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\r\n\r\nexport default function Cart({ cartItems, setCartItems }) {\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n  const [activeStep, setActiveStep] = useState(\"cart\"); // 'cart', 'checkout', 'complete'\r\n  const API_URL = \"http://localhost:5001\";\r\n\r\n  const [formData, setFormData] = useState({\r\n    fullName: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    address: \"\",\r\n    city: \"\",\r\n    zipCode: \"\",\r\n    country: \"LK\",\r\n  });\r\n\r\n  const totalItems = cartItems.reduce((acc, item) => acc + item.qty, 0);\r\n  const subtotal = cartItems.reduce((acc, item) => acc + item.product.price * item.qty, 0);\r\n  const shipping = subtotal > 2500 ? 0 : 250;\r\n  const tax = subtotal * 0.05;\r\n  const total = subtotal + shipping + tax;\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  // Functions for cart manipulation\r\n  const decreaseQty = (item) => {\r\n    const updatedCart = cartItems.map((cartItem) =>\r\n      cartItem.product._id === item.product._id && cartItem.qty > 1\r\n        ? { ...cartItem, qty: cartItem.qty - 1 }\r\n        : cartItem\r\n    );\r\n    setCartItems(updatedCart);\r\n  };\r\n\r\n  const increaseQty = (item) => {\r\n    const updatedCart = cartItems.map((cartItem) =>\r\n      cartItem.product._id === item.product._id && cartItem.qty < item.product.stock\r\n        ? { ...cartItem, qty: cartItem.qty + 1 }\r\n        : cartItem\r\n    );\r\n    setCartItems(updatedCart);\r\n  };\r\n\r\n  const removeItem = (item) => {\r\n    const updatedCart = cartItems.filter((cartItem) => cartItem.product._id !== item.product._id);\r\n    setCartItems(updatedCart);\r\n  };\r\n\r\n  // Stripe payment integration\r\n  async function placeOrderHandler(e) {\r\n    e.preventDefault();\r\n\r\n    if (!stripe || !elements) {\r\n      toast.error(\"Stripe not loaded yet\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Fetch payment intent client secret from backend first\r\n      const paymentIntentRes = await fetch(`${API_URL}/api/v1/payment`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ \r\n          amount: total * 100 // Stripe expects amount in cents\r\n        }),\r\n      });\r\n\r\n      const { clientSecret } = await paymentIntentRes.json();\r\n\r\n      const result = await stripe.confirmCardPayment(clientSecret, {\r\n        payment_method: {\r\n          card: elements.getElement(CardElement),\r\n          billing_details: {\r\n            name: formData.fullName,\r\n            email: formData.email,\r\n            phone: formData.phone,\r\n            address: {\r\n              line1: formData.address,\r\n              city: formData.city,\r\n              postal_code: formData.zipCode,\r\n              country: formData.country,\r\n            },\r\n          },\r\n        },\r\n      });\r\n\r\n      if (result.error) {\r\n        toast.error(result.error.message);\r\n        return;\r\n      }\r\n\r\n      if (result.paymentIntent.status === \"succeeded\") {\r\n        // Now create the order in backend\r\n        const orderResponse = await fetch(`${API_URL}/api/v1/order`, {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            cartItems,\r\n            formData,\r\n            subtotal,\r\n            shipping,\r\n            tax,\r\n            total,\r\n            paymentIntentId: result.paymentIntent.id,\r\n          }),\r\n        });\r\n\r\n        const orderData = await orderResponse.json();\r\n\r\n        if (!orderResponse.ok) {\r\n          throw new Error(orderData.error || \"Failed to place order\");\r\n        }\r\n\r\n        setCartItems([]);\r\n        setActiveStep(\"complete\");\r\n        toast.success(\"Order placed successfully!\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      toast.error(error.message || \"Order placement failed\");\r\n    }\r\n  }\r\n\r\n  if (activeStep === \"complete\") {\r\n    return (\r\n      <div className=\"order-complete\">\r\n        <div className=\"complete-card\">\r\n          <div className=\"checkmark\">✓</div>\r\n          <h2>Order Confirmed!</h2>\r\n          <p>Thank you for your purchase. Your order has been received.</p>\r\n          <Link to=\"/\" className=\"btn continue-shopping\">\r\n            Continue Shopping\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return cartItems.length > 0 ? (\r\n    <Fragment>\r\n      <div className=\"cart-container\">\r\n        {activeStep === \"checkout\" && (\r\n          <button className=\"back-to-cart\" onClick={() => setActiveStep(\"cart\")}>\r\n            <FaArrowLeft /> Back to Cart\r\n          </button>\r\n        )}\r\n        \r\n        <div className=\"cart-content\">\r\n          {activeStep === \"cart\" ? (\r\n            <>\r\n              <div className=\"cart-items-section\">\r\n                <h2 className=\"cart-title\">\r\n                  Your Shopping Cart <span>({totalItems} items)</span>\r\n                  <br/><h5>Buy morethan 2500 and get free shipping</h5>\r\n                </h2>\r\n                <div className=\"cart-items\">\r\n                  {cartItems.map((item) => (\r\n                    <div key={item.product._id} className=\"cart-item\">\r\n                      <div className=\"item-image-container\">\r\n                        <img\r\n                          src={item.product.images[0].image}\r\n                          alt={item.product.name}\r\n                          className=\"cart-item-image\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"cart-item-details\">\r\n                        <div className=\"item-info\">\r\n                          <Link to={`/product/${item.product._id}`} className=\"cart-item-name\">\r\n                            {item.product.name}\r\n                          </Link>\r\n                          <p className=\"cart-item-price\">Rs {item.product.price.toLocaleString()}</p>\r\n                        </div>\r\n                        <div className=\"item-controls\">\r\n                          <div className=\"quantity-control\">\r\n                            <button\r\n                              className=\"qty-btn\"\r\n                              onClick={() => decreaseQty(item)}\r\n                              disabled={item.qty <= 1}\r\n                              data-tooltip=\"Decrease quantity\"\r\n                            >\r\n                              <FaMinus />\r\n                            </button>\r\n                            <span className=\"quantity\">{item.qty}</span>\r\n                            <button\r\n                              className=\"qty-btn\"\r\n                              onClick={() => increaseQty(item)}\r\n                              disabled={item.qty >= item.product.stock}\r\n                              data-tooltip=\"Increase quantity\"\r\n                            >\r\n                              <FaPlus />\r\n                            </button>\r\n                          </div>\r\n                          <button \r\n                            className=\"remove-btn\" \r\n                            onClick={() => removeItem(item)}\r\n                            data-tooltip=\"Remove item\"\r\n                          >\r\n                            <FaTrash /> Remove\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              <div className=\"order-summary-section\">\r\n                <div className=\"order-summary\">\r\n                  <h3>Order Summary</h3>\r\n                  <div className=\"summary-row\">\r\n                    <span>Subtotal</span>\r\n                    <span>Rs {subtotal.toLocaleString()}</span>\r\n                  </div>\r\n                  <div className=\"summary-row\">\r\n                    <span>Shipping</span>\r\n                    <span>{shipping === 0 ? \"FREE\" : `Rs ${shipping}`}</span>\r\n                  </div>\r\n                  <div className=\"summary-row\">\r\n                    <span>Tax (5%)</span>\r\n                    <span>Rs {tax.toFixed(2)}</span>\r\n                  </div>\r\n                  <div className=\"summary-row total\">\r\n                    <span>Total</span>\r\n                    <span>Rs {total.toFixed(2)}</span>\r\n                  </div>\r\n                  <button\r\n                    className=\"checkout-btn\"\r\n                    onClick={() => setActiveStep(\"checkout\")}\r\n                  >\r\n                    Proceed to Checkout\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div className=\"checkout-section\">\r\n              <div className=\"checkout-form-container\">\r\n                <h2>Checkout</h2>\r\n                <form onSubmit={placeOrderHandler} className=\"checkout-form\">\r\n                  <div className=\"form-section\">\r\n                    <h3><FaUser /> Personal Information</h3>\r\n                    <div className=\"form-group\">\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"fullName\"\r\n                        value={formData.fullName}\r\n                        onChange={handleChange}\r\n                        placeholder=\"Full Name\"\r\n                        required\r\n                      />\r\n                      <input\r\n                        type=\"email\"\r\n                        name=\"email\"\r\n                        value={formData.email}\r\n                        onChange={handleChange}\r\n                        placeholder=\"Email Address\"\r\n                        required\r\n                      />\r\n                      <input\r\n                        type=\"number\"\r\n                        name=\"phone\"\r\n                        value={formData.phone}\r\n                        onChange={handleChange}\r\n                        placeholder=\"Phone Number\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-section\">\r\n                    <h3><FaMapMarkerAlt /> Shipping Address</h3>\r\n                    <div className=\"form-group\">\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"address\"\r\n                        value={formData.address}\r\n                        onChange={handleChange}\r\n                        placeholder=\"Street Address\"\r\n                        required\r\n                      />\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"city\"\r\n                        value={formData.city}\r\n                        onChange={handleChange}\r\n                        placeholder=\"City\"\r\n                        required\r\n                      />\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"zipCode\"\r\n                        value={formData.zipCode}\r\n                        onChange={handleChange}\r\n                        placeholder=\"Zip Code\"\r\n                        required\r\n                      />\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"country\"\r\n                        value={formData.country}\r\n                        onChange={handleChange}\r\n                        placeholder=\"Country\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"form-section\">\r\n                    <h3><FaCreditCard /> Payment Details</h3>\r\n                    <CardElement options={{\r\n                      style: {\r\n                        base: {\r\n                          fontSize: '16px',\r\n                          color: '#424770',\r\n                          '::placeholder': {\r\n                            color: '#aab7c4',\r\n                          },\r\n                        },\r\n                        invalid: {\r\n                          color: '#9e2146',\r\n                        },\r\n                      },\r\n                    }} />\r\n                  </div>\r\n                  <div className=\"order-summary-checkout\">\r\n                    <h3>Order Summary</h3>\r\n                    <div className=\"summary-row total\">\r\n                      <span>Total</span>\r\n                      <span>Rs {total.toFixed(2)}</span>\r\n                    </div>\r\n                    <button type=\"submit\" className=\"place-order-btn\">\r\n                      Place Order\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  ) : (\r\n    <div className=\"empty-cart\">\r\n      <h2>Your cart is empty!</h2>\r\n      <Link to=\"/\" className=\"btn continue-shopping\">\r\n        Continue Shopping\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n// import { Fragment, useState } from \"react\";\r\n// import { Link } from \"react-router-dom\";\r\n// import { toast } from \"react-toastify\";\r\n// import { FaPlus, FaMinus, FaTrash, FaArrowLeft, FaCreditCard, FaMapMarkerAlt, FaUser } from \"react-icons/fa\";\r\n// import { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\r\n\r\n\r\n// const stripe = useStripe();\r\n// const elements = useElements();\r\n\r\n\r\n// export default function Cart({ cartItems, setCartItems }) {\r\n//   const [activeStep, setActiveStep] = useState(\"cart\"); // 'cart', 'checkout', 'complete'\r\n//   const API_URL = \"http://localhost:5001\";\r\n\r\n//   // Example for your Product component\r\n//   async function placeOrderHandler(e) {\r\n//     e.preventDefault();\r\n    \r\n//     // Validate all required fields\r\n//     const requiredFields = ['fullName', 'email', 'phone', 'address', 'city', 'zipCode', 'country'];\r\n//     const missingFields = requiredFields.filter(field => !formData[field].trim());\r\n  \r\n//     if (missingFields.length > 0) {\r\n//       toast.error(`Missing required fields: ${missingFields.join(', ')}`);\r\n//       return;\r\n//     }\r\n  \r\n//     // Validate payment details\r\n//     const cardNum = formData.cardNumber.replace(/\\s/g, '');\r\n//     if (!/^\\d{16}$/.test(cardNum)) {\r\n//       toast.error('Invalid card number (must be 16 digits)');\r\n//       return;\r\n//     }\r\n  \r\n//     try {\r\n//       const orderData = {\r\n//         cartItems: cartItems.map(item => ({\r\n//           product: {\r\n//             _id: item.product._id,\r\n//             name: item.product.name,\r\n//             price: item.product.price\r\n//           },\r\n//           qty: item.qty\r\n//         })),\r\n//         formData: {\r\n//           ...formData,\r\n//           // Ensure phone is string (some validations expect string)\r\n//           phone: String(formData.phone)\r\n//         },\r\n//         subtotal,\r\n//         shipping,\r\n//         tax,\r\n//         total\r\n//       };\r\n  \r\n//       const response = await fetch(`${API_URL}/api/v1/order`, {\r\n//         method: 'POST',\r\n//         headers: { 'Content-Type': 'application/json' },\r\n//         body: JSON.stringify(orderData)\r\n//       });\r\n  \r\n//       const data = await response.json();\r\n  \r\n//       if (!response.ok) {\r\n//         // Handle specific backend validation errors\r\n//         if (data.error && data.error.includes('validation failed')) {\r\n//           const validationErrors = Object.entries(data.errors || {})\r\n//             .map(([field, error]) => `${field}: ${error.message}`);\r\n//           toast.error(`Validation errors:\\n${validationErrors.join('\\n')}`);\r\n//         } else {\r\n//           throw new Error(data.message || 'Failed to place order');\r\n//         }\r\n//         return;\r\n//       }\r\n  \r\n//       // Success case\r\n//       setCartItems([]);\r\n//       setActiveStep('complete');\r\n//       toast.success('Order confirmed!');\r\n      \r\n//     } catch (error) {\r\n//       console.error('Order error:', error);\r\n//       toast.error(error.message || 'Failed to place order. Please try again.');\r\n//     }\r\n//   }\r\n\r\n//   const [formData, setFormData] = useState({\r\n//     fullName: \"\",\r\n//     email: \"\",\r\n//     phone: \"\",\r\n//     address: \"\",\r\n//     city: \"\",\r\n//     zipCode: \"\",\r\n//     country: \"\",\r\n//     cardNumber: \"\",\r\n//     expiryDate: \"\",\r\n//     cvv: \"\",\r\n//   });\r\n\r\n//   function increaseQty(item) {\r\n//     if (item.product.stock <= item.qty) {\r\n//       toast.warning(`Only ${item.product.stock} available in stock`);\r\n//       return;\r\n//     }\r\n//     const updatedItems = cartItems.map((i) =>\r\n//       i.product._id === item.product._id ? { ...i, qty: i.qty + 1 } : i\r\n//     );\r\n//     setCartItems(updatedItems);\r\n//   }\r\n  \r\n//   function decreaseQty(item) {\r\n//     if (item.qty > 1) {\r\n//       const updatedItems = cartItems.map((i) =>\r\n//         i.product._id === item.product._id ? { ...i, qty: i.qty - 1 } : i\r\n//       );\r\n//       setCartItems(updatedItems);\r\n//     }\r\n//   }\r\n  \r\n//   function removeItem(item) {\r\n//     const updatedItems = cartItems.filter((i) => i.product._id !== item.product._id);\r\n//     setCartItems(updatedItems);\r\n//     toast.success(`${item.product.name} removed from cart`);\r\n//   }\r\n\r\n//   async function placeOrderHandler(e) {\r\n//     e.preventDefault();\r\n    \r\n//     // Validate all form fields\r\n//     const emptyFields = Object.entries(formData).some(([key, value]) => {\r\n//       // Skip CVV validation here if you have separate validation\r\n//       if (key === 'cvv') return false;\r\n//       return value.trim() === \"\";\r\n//     });\r\n  \r\n//     if (emptyFields) {\r\n//       toast.error(\"All fields are required!\");\r\n//       return;\r\n//     }\r\n  \r\n//     // Validate card details\r\n//     if (!/^\\d{16}$/.test(formData.cardNumber.replace(/\\s/g, ''))) {\r\n//       toast.error(\"Please enter a valid 16-digit card number\");\r\n//       return;\r\n//     }\r\n  \r\n//     if (!/^\\d{3,4}$/.test(formData.cvv)) {\r\n//       toast.error(\"Please enter a valid CVV (3 or 4 digits)\");\r\n//       return;\r\n//     }\r\n  \r\n//     try {\r\n//       const response = await fetch(`${API_URL}/api/v1/order`, {\r\n//         method: \"POST\",\r\n//         headers: { \"Content-Type\": \"application/json\" },\r\n//         body: JSON.stringify({\r\n//           cartItems,\r\n//           formData,\r\n//           subtotal,\r\n//           shipping,\r\n//           tax,\r\n//           total\r\n//         }),\r\n//       });\r\n  \r\n//       const data = await response.json();\r\n  \r\n//       if (!response.ok) {\r\n//         throw new Error(data.error || 'Failed to plac0e order2121131161');\r\n//       }\r\n  \r\n//       if (data.success) {\r\n//         setCartItems([]);\r\n//         setActiveStep(\"complete\");\r\n//         toast.success(\"Order Confirmed!\");\r\n//       } else {\r\n//         if (data.stockIssues) {\r\n//           // Handle stock issues\r\n//           data.stockIssues.forEach(issue => {\r\n//             toast.error(`${issue.name}: ${issue.error}${issue.available ? ` (Available: ${issue.available})` : ''}`);\r\n//           });\r\n          \r\n//           // Remove problematic items from cart\r\n//           const updatedCart = cartItems.filter(item => \r\n//             !data.stockIssues.some(issue => issue.productId === item.product._id)\r\n//           );\r\n//           setCartItems(updatedCart);\r\n//         } else {\r\n//           toast.error(data.error || \"Failed to placepjkk order\");\r\n//         }\r\n//       }\r\n//     } catch (error) {\r\n//       console.error(\"Order error:\", error);\r\n//       toast.error(error.message || \"Failed to place order. Please try again.\");\r\n//     }\r\n//   }\r\n//   const handleChange = (e) => {\r\n//     setFormData({ ...formData, [e.target.name]: e.target.value });\r\n//   };\r\n\r\n//   const totalItems = cartItems.reduce((acc, item) => acc + item.qty, 0);\r\n//   const subtotal = cartItems.reduce((acc, item) => acc + item.product.price * item.qty, 0);\r\n//   const shipping = subtotal > 5000 ? 0 : 250;\r\n//   const tax = subtotal * 0.05;\r\n//   const total = subtotal + shipping + tax;\r\n\r\n//   if (activeStep === \"complete\") {\r\n//     return (\r\n//       <div className=\"order-complete\">\r\n//         <div className=\"complete-card\">\r\n//           <div className=\"checkmark\">✓</div>\r\n//           <h2>Order Confirmed!</h2>\r\n//           <p>Thank you for your purchase. Your order has been received.</p>\r\n//           <Link to=\"/\" className=\"btn continue-shopping\">\r\n//             Continue Shopping\r\n//           </Link>\r\n//         </div>\r\n//       </div>\r\n//     );\r\n//   }\r\n\r\n\r\n\r\n//   //Stripe payment integration\r\n//   async function placeOrderHandler(e) {\r\n//     e.preventDefault();\r\n  \r\n//     if (!stripe || !elements) {\r\n//       toast.error(\"Stripe not loaded yet\");\r\n//       return;\r\n//     }\r\n  \r\n//     try {\r\n//       // Fetch payment intent client secret from backend first\r\n//       const paymentIntentRes = await fetch(`${API_URL}/api/v1/create-payment-intent`, {\r\n//         method: 'POST',\r\n//         headers: { 'Content-Type': 'application/json' },\r\n//         body: JSON.stringify({ \r\n//           amount: total * 100 // Stripe expects amount in cents\r\n//         }),\r\n//       });\r\n  \r\n//       const { clientSecret } = await paymentIntentRes.json();\r\n  \r\n//       const result = await stripe.confirmCardPayment(clientSecret, {\r\n//         payment_method: {\r\n//           card: elements.getElement(CardElement),\r\n//           billing_details: {\r\n//             name: formData.fullName,\r\n//             email: formData.email,\r\n//             phone: formData.phone,\r\n//             address: {\r\n//               line1: formData.address,\r\n//               city: formData.city,\r\n//               postal_code: formData.zipCode,\r\n//               country: formData.country,\r\n//             },\r\n//           },\r\n//         },\r\n//       });\r\n  \r\n//       if (result.error) {\r\n//         toast.error(result.error.message);\r\n//         return;\r\n//       }\r\n  \r\n//       if (result.paymentIntent.status === \"succeeded\") {\r\n//         // Now create the order in backend\r\n//         const orderResponse = await fetch(`${API_URL}/api/v1/order`, {\r\n//           method: \"POST\",\r\n//           headers: { \"Content-Type\": \"application/json\" },\r\n//           body: JSON.stringify({\r\n//             cartItems,\r\n//             formData,\r\n//             subtotal,\r\n//             shipping,\r\n//             tax,\r\n//             total,\r\n//             paymentIntentId: result.paymentIntent.id,\r\n//           }),\r\n//         });\r\n  \r\n//         const orderData = await orderResponse.json();\r\n  \r\n//         if (!orderResponse.ok) {\r\n//           throw new Error(orderData.error || \"Failed to place order\");\r\n//         }\r\n  \r\n//         setCartItems([]);\r\n//         setActiveStep(\"complete\");\r\n//         toast.success(\"Order placed successfully!\");\r\n//       }\r\n//     } catch (error) {\r\n//       console.error(error);\r\n//       toast.error(error.message || \"Order placement failed\");\r\n//     }\r\n//   }\r\n  \r\n//   return cartItems.length > 0 ? (\r\n//     <Fragment>\r\n//       <div className=\"cart-container\">\r\n//         {activeStep === \"checkout\" && (\r\n//           <button className=\"back-to-cart\" onClick={() => setActiveStep(\"cart\")}>\r\n//             <FaArrowLeft /> Back to Cart\r\n//           </button>\r\n//         )}\r\n        \r\n//         <div className=\"cart-content\">\r\n//           {activeStep === \"cart\" ? (\r\n//             <>\r\n//               <div className=\"cart-items-section\">\r\n//                 <h2 className=\"cart-title\">\r\n//                   Your Shopping Cart <span>({totalItems} items)</span>\r\n//                 </h2>\r\n//                 <div className=\"cart-items\">\r\n//                   {cartItems.map((item) => (\r\n//                     <div key={item.product._id} className=\"cart-item\">\r\n//                       <div className=\"item-image-container\">\r\n//                         <img\r\n//                           src={item.product.images[0].image}\r\n//                           alt={item.product.name}\r\n//                           className=\"cart-item-image\"\r\n//                         />\r\n//                       </div>\r\n//                       <div className=\"cart-item-details\">\r\n//                         <div className=\"item-info\">\r\n//                           <Link to={`/product/${item.product._id}`} className=\"cart-item-name\">\r\n//                             {item.product.name}\r\n//                           </Link>\r\n//                           <p className=\"cart-item-price\">Rs {item.product.price.toLocaleString()}</p>\r\n//                         </div>\r\n//                         <div className=\"item-controls\">\r\n//                         <div className=\"quantity-control\">\r\n//   <button\r\n//     className=\"qty-btn\"\r\n//     onClick={() => decreaseQty(item)}\r\n//     disabled={item.qty <= 1}\r\n//     data-tooltip=\"Decrease quantity\"\r\n//   >\r\n//     <FaMinus />\r\n//   </button>\r\n//   <span className=\"quantity\">{item.qty}</span>\r\n//   <button\r\n//     className=\"qty-btn\"\r\n//     onClick={() => increaseQty(item)}\r\n//     disabled={item.qty >= item.product.stock}\r\n//     data-tooltip=\"Increase quantity\"\r\n//   >\r\n//     <FaPlus />\r\n//   </button>\r\n// </div>\r\n// <button \r\n//   className=\"remove-btn\" \r\n//   onClick={() => removeItem(item)}\r\n//   data-tooltip=\"Remove item\"\r\n// >\r\n//   <FaTrash /> Remove\r\n// </button>\r\n//                         </div>\r\n//                       </div>\r\n//                     </div>\r\n//                   ))}\r\n//                 </div>\r\n//               </div>\r\n//               <div className=\"order-summary-section\">\r\n//   <div className=\"order-summary\">\r\n//     <h3>Order Summary</h3>\r\n//     <div className=\"summary-row\">\r\n//       <span>Subtotal</span>\r\n//       <span>Rs {subtotal.toLocaleString()}</span>\r\n//     </div>\r\n//     <div className=\"summary-row\">\r\n//       <span>Shipping</span>\r\n//       <span>{shipping === 0 ? \"FREE\" : `Rs ${shipping}`}</span>\r\n//     </div>\r\n//     <div className=\"summary-row\">\r\n//       <span>Tax (5%)</span>\r\n//       <span>Rs {tax.toFixed(2)}</span>\r\n//     </div>\r\n//     <div className=\"summary-row total\">\r\n//       <span>Total</span>\r\n//       <span>Rs {total.toFixed(2)}</span>\r\n//     </div>\r\n//     <button\r\n//       className=\"checkout-btn\"\r\n//       onClick={() => setActiveStep(\"checkout\")}\r\n//     >\r\n//       Proceed to Checkout\r\n//     </button>\r\n//   </div>\r\n// </div>\r\n//             </>\r\n//           ) : (\r\n//             <div className=\"checkout-section\">\r\n//               <div className=\"checkout-form-container\">\r\n//                 <h2>Checkout</h2>\r\n//                 <div className=\"checkout-steps\">\r\n//                   <div className={`step ${activeStep === \"cart\" ? \"active\" : \"\"}`}>\r\n//                     <span>1</span> Cart\r\n//                   </div>\r\n//                   <div className={`step ${activeStep === \"checkout\" ? \"active\" : \"\"}`}>\r\n//                     <span>2</span> Checkout\r\n//                   </div>\r\n//                   <div className={`step ${activeStep === \"complete\" ? \"active\" : \"\"}`}>\r\n//                     <span>3</span> Confirmation<br/>\r\n//                   </div>\r\n//                 </div>\r\n                \r\n//                 <form onSubmit={placeOrderHandler} className=\"checkout-form\">\r\n//                   <div className=\"form-section\">\r\n//                     <br/>\r\n//                     <h3><FaUser /> Personal Information</h3>\r\n//                     <div className=\"form-group\">\r\n//                       <input\r\n//                         type=\"text\"\r\n//                         name=\"fullName\"\r\n//                         value={formData.fullName}\r\n//                         onChange={handleChange}\r\n//                         placeholder=\"Name\"\r\n//                         required\r\n//                       />\r\n                      \r\n\r\n//                     <input\r\n//                         type=\"email\"\r\n//                         name=\"email\"\r\n//                         value={formData.email}\r\n//                         onChange={handleChange}\r\n//                         placeholder=\"Email Address\"\r\n//                         required\r\n//                       />\r\n//                       <input\r\n//                         type=\"number\"\r\n//                         name=\"phone\"\r\n//                         value={formData.phone}\r\n//                         onChange={handleChange}\r\n//                         placeholder=\"Phone Number\"\r\n//                         required\r\n//                       />\r\n\r\n//                     </div>\r\n//                   </div>\r\n//                   {/*→ Stripe does NOT allow you to collect raw card details using normal inputs (for security/PCI-DSS rules).\r\n//                   → You must use Stripe's CardElement or Stripe Elements to securely handle card numbers, expiry, CVV etc.8→*/}\r\n//                   <div className=\"form-section\">\r\n//                     <h3><FaMapMarkerAlt /> Shipping Address</h3>\r\n//                     <div className=\"form-group\">\r\n//                       <input\r\n//                         type=\"text\"\r\n//                         name=\"address\"\r\n//                         value={formData.address}\r\n//                         onChange={handleChange}\r\n//                         placeholder=\"Street Address\"\r\n//                         required\r\n//                       />\r\n//                     </div>\r\n//                     <div className=\"form-row\">\r\n//                       <div className=\"form-group\">\r\n//                         <input\r\n//                           type=\"text\"\r\n//                           name=\"city\"\r\n//                           value={formData.city}\r\n//                           onChange={handleChange}\r\n//                           placeholder=\"City\"\r\n//                           required\r\n//                         />\r\n//                       </div>\r\n//                       <div className=\"form-group\">\r\n//                         <input\r\n//                           type=\"text\"\r\n//                           name=\"zipCode\"\r\n//                           value={formData.zipCode}\r\n//                           onChange={handleChange}\r\n//                           placeholder=\"Zip Code\"\r\n//                           required\r\n//                         />\r\n//                       </div>\r\n//                     </div>\r\n//                     <div className=\"form-group\">\r\n//                       <input\r\n//                         type=\"text\"\r\n//                         name=\"country\"\r\n//                         value={formData.country}\r\n//                         onChange={handleChange}\r\n//                         placeholder=\"Country\"\r\n//                         required\r\n//                       />\r\n//                     </div>\r\n//                   </div><div className=\"form-section\">\r\n//                   <h3><FaCreditCard /> Payment Details</h3>\r\n//                   <div className=\"form-group\">\r\n//                     <CardElement options={{\r\n//                       style: {\r\n//                         base: {\r\n//                           fontSize: '16px',\r\n//                           color: '#424770',\r\n//                           '::placeholder': {\r\n//                             color: '#aab7c4',\r\n//                           },\r\n//                         },\r\n//                         invalid: {\r\n//                           color: '#9e2146',\r\n//                         },\r\n//                       },\r\n//                     }} />\r\n//                   </div>\r\n\r\n//                 </div>\r\n\r\n                  \r\n               \r\n                  \r\n//                   <div className=\"order-summary-checkout\">\r\n//                     <h3>Order Summary</h3>\r\n//                     {cartItems.map((item) => (\r\n//                       <div key={item.product._id} className=\"checkout-item\">\r\n//                         <span>\r\n//                           {item.product.name} × {item.qty}\r\n//                         </span>\r\n//                         <span>Rs {(item.product.price * item.qty).toLocaleString()}</span>\r\n//                       </div>\r\n//                     ))}\r\n//                     <div className=\"summary-row\">\r\n//                       <span>Subtotal</span>\r\n//                       <span>Rs {subtotal.toLocaleString()}</span>\r\n//                     </div>\r\n//                     <div className=\"summary-row\">\r\n//                       <span>Shipping</span>\r\n//                       <span>{shipping === 0 ? \"FREE\" : `Rs ${shipping}`}</span>\r\n//                     </div>\r\n//                     <div className=\"summary-row\">\r\n//                       <span>Tax (5%)</span>\r\n//                       <span>Rs {tax.toFixed(2)}</span>\r\n//                     </div>\r\n//                     <div className=\"summary-row total\">\r\n//                       <span>Total</span>\r\n//                       <span>Rs {total.toFixed(2)}</span>\r\n//                     </div>\r\n//                     <button type=\"submit\" className=\"place-order-btn\">\r\n//                       Place Order\r\n//                     </button>\r\n//                   </div>\r\n//                 </form>\r\n//               </div>\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n//       </div>\r\n//     </Fragment>\r\n//   ) : (\r\n//     <div className=\"empty-cart\">\r\n//       <div className=\"empty-cart-content\">\r\n//         <div className=\"empty-cart-icon\">🛒</div>\r\n//         <h2>Your cart is empty</h2>\r\n//         <p>Looks like you haven't added anything to your cart yet</p>\r\n//         <Link to=\"/\" className=\"btn continue-shopping\">\r\n//           Continue Shopping\r\n//         </Link>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }"],"mappings":"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CA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA7E,EAAA,CAl5BwBH,IAAI;EAAA,QACXL,SAAS,EACPC,WAAW;AAAA;AAAA0G,EAAA,GAFNtG,IAAI;AAAA,IAAAsG,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}